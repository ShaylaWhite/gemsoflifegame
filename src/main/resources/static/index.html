<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mastermind Game</title>
</head>
<body>
<h1>Welcome to Mastermind Game</h1>

<form id="guessForm">
    <label for="guess">Enter your guess (4 numbers between 0-7): </label>
    <input type="text" id="guess" name="guess" required>
    <button type="submit">Submit Guess</button>
</form>

<div id="feedback"></div>
<div id="guessHistory"></div>

<script>
    const guessForm = document.getElementById("guessForm");
    const feedbackDiv = document.getElementById("feedback");
    const historyDiv = document.getElementById("guessHistory");

    guessForm.addEventListener("submit", function(event) {
        event.preventDefault();
        const guess = document.getElementById("guess").value;

        fetch(`/game/guess?guess=${guess}`, {
            method: "POST",
        })
            .then(response => response.text())
            .then(data => {
                feedbackDiv.innerHTML = `Feedback: ${data}`;
                fetch("/game/status")
                    .then(response => response.json())
                    .then(game => {
                        let historyHTML = "<h3>Guess History:</h3>";
                        game.guessHistory.forEach((guess, index) => {
                            historyHTML += `<p>${guess} -> ${game.feedbackHistory[index]}</p>`;
                        });
                        historyDiv.innerHTML = historyHTML;
                    });
            });
    });
</script>
</body>
</html>
